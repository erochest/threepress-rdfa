
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><title>XML source view</title><link rel="stylesheet" type="text/css" href="../xmlverbatim.css"/></head><body class="xmlverb-default"><tt>
<!-- converted by xmlverbatim.xsl 1.1, (c) O. Becker -->
<div xmlns:xd="http://www.pnp-software.com/XSLTdoc" class="xmlverb-default">&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e1">stylesheet</a></span><span class="xmlverb-ns-name"> xmlns:xsl</span>="<span class="xmlverb-ns-uri">http://www.w3.org/1999/XSL/Transform</span>"<span class="xmlverb-ns-name"> xmlns:tei</span>="<span class="xmlverb-ns-uri">http://www.tei-c.org/ns/1.0</span>"<span class="xmlverb-ns-name"> xmlns:edate</span>="<span class="xmlverb-ns-uri">http://exslt.org/dates-and-times</span>"<span class="xmlverb-ns-name"> xmlns:xd</span>="<span class="xmlverb-ns-uri">http://www.pnp-software.com/XSLTdoc</span>" <span class="xmlverb-attr-name">exclude-result-prefixes</span>="<span class="xmlverb-attr-content">xd tei edate</span>" <span class="xmlverb-attr-name">extension-element-prefixes</span>="<span class="xmlverb-attr-content">edate</span>" <span class="xmlverb-attr-name">version</span>="<span class="xmlverb-attr-content">1.0</span>"&gt;<span class="xmlverb-text"><br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e3">doc</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">stylesheet</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e5">short</a></span>&gt;<span class="xmlverb-text"> TEI stylesheet dealing with elements from the linking module. </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e8">detail</a></span>&gt;<span class="xmlverb-text"> This library is free software; you can redistribute it and/or<br/>
      modify it under the terms of the GNU Lesser General Public License as<br/>
      published by the Free Software Foundation; either version 2.1 of the<br/>
      License, or (at your option) any later version. This library is<br/>
      distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;<br/>
      without even the implied warranty of MERCHANTABILITY or FITNESS FOR A<br/>
      PARTICULAR PURPOSE. See the GNU Lesser General Public License for more<br/>
      details. You should have received a copy of the GNU Lesser General Public<br/>
      License along with this library; if not, write to the Free Software<br/>
      Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e11">author</a></span>&gt;<span class="xmlverb-text">See AUTHORS</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">author</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e14">cvsId</a></span>&gt;<span class="xmlverb-text">$Id: linking.xsl 3762 2007-10-24 09:11:02Z rahtz $</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">cvsId</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e17">copyright</a></span>&gt;<span class="xmlverb-text">2007, TEI Consortium</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">copyright</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e21">doc</a></span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e23">short</a></span>&gt;<span class="xmlverb-text">Process elements tei:TEI</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e26">detail</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e30">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">tei:TEI</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">xref</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e32">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">tei:teiHeader/tei:fileDesc/tei:titleStmt/tei:title</span>" /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e35">doc</a></span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e37">short</a></span>&gt;<span class="xmlverb-text">Process elements tei:anchor|tei:p in xref mode</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e40">detail</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e44">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">tei:anchor|tei:p</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">xref</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e46">text</a></span>&gt;<span class="xmlverb-text">here</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e51">doc</a></span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e53">short</a></span>&gt;<span class="xmlverb-text">Process elements tei:bibl</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e56">detail</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e60">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">tei:bibl</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">xref</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e62">text</a></span>&gt;<span class="xmlverb-text">[</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e65">number</a></span> /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e67">text</a></span>&gt;<span class="xmlverb-text">]</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e71">doc</a></span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e73">short</a></span>&gt;<span class="xmlverb-text">Process elements<br/>
      tei:div|tei:div0|tei:div1|tei:div2|tei:div3|tei:div4|tei:div5|tei:div6 in<br/>
      xref mode</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e76">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">minimal</span>"&gt;<span class="xmlverb-text">whether to make a link with just numbers or with<br/>
      text too</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e79">detail</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e83">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">tei:div|tei:div0|tei:div1|tei:div2|tei:div3|tei:div4|tei:div5|tei:div6</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">xref</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e85">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">minimal</span>"&gt;<span class="xmlverb-text">false</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e88">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">header</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e90">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">minimal</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$minimal</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e92">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">display</span>"&gt;<span class="xmlverb-text">plain</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e97">doc</a></span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e99">short</a></span>&gt;<span class="xmlverb-text">Process elements tei:note</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e102">detail</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e106">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">tei:note</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">xref</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e108">number</a></span> <span class="xmlverb-attr-name">level</span>="<span class="xmlverb-attr-content">any</span>" /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e112">doc</a></span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e114">short</a></span>&gt;<span class="xmlverb-text">Process elements tei:ptr|tei:xptr in xref mode</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e117">detail</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e121">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">tei:ptr|tei:xptr</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e123">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">makeTEILink</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e125">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">ptr</span>"&gt;<span class="xmlverb-text">true</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e130">doc</a></span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e132">short</a></span>&gt;<span class="xmlverb-text">Process elements tei:ref|tei:xref</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e135">detail</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e139">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">tei:ref|tei:xref</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e141">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">makeTEILink</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e143">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">ptr</span>"&gt;<span class="xmlverb-text">false</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e148">doc</a></span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e150">short</a></span>&gt;<span class="xmlverb-text">[common] Making a heading for something</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e153">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">minimal</span>"&gt;<span class="xmlverb-text">whether to display headings</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e156">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">toc</span>"&gt;<span class="xmlverb-text">whether this is making a TOC entry</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e159">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">display</span>"&gt;<span class="xmlverb-text">detail of display (full, simple, plain), ie<br/>
    whether markup is followed</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e162">detail</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e166">template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">header</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e168">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">minimal</span>"&gt;<span class="xmlverb-text">false</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e171">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">toc</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e173">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">display</span>"&gt;<span class="xmlverb-text">full</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e176">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">depth</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e178">apply-templates</a></span> <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">depth</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e181">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formatHeadingNumber</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e183">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">toc</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e185">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$toc</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e188">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">text</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e190">choose</a></span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e192">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">local-name(.) = 'TEI'</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e194">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">local-name(.) = 'TEI.2'</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e196">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$depth &amp;gt; $numberHeadingsDepth</span>"&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e199">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">ancestor::tei:back</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e201">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">not($numberBackHeadings='')</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e203">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">i18n</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e205">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">word</span>"&gt;<span class="xmlverb-text">appendixWords</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e209">text</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e212">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">numberBackDiv</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e214">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$minimal='false'</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e216">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$numberSpacer</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e221">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">ancestor::tei:front</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e223">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">not($numberFrontHeadings='')</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e225">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">numberFrontDiv</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e227">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">minimal</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e229">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$minimal</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e236">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$numberHeadings ='true'</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e238">choose</a></span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e240">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$prenumberedHeadings='true'</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e242">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@n</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e245">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e247">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">numberBodyDiv</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e251">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$minimal='false'</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e253">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$headingNumberSuffix</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e261">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$minimal='false'</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e263">choose</a></span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e265">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">local-name(.) = 'TEI' or local-name(.)='TEI.2'</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e267">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">tei:teiHeader/tei:fileDesc/tei:titleStmt/tei:title</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e270">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">not(tei:head) and @n</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e272">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@n</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e275">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">not($toc='')</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e277">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">makeInternalLink</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e279">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">dest</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e281">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$toc</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e284">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">class</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e286">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$class_toc</span>" /&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e288">text</a></span>&gt;<span class="xmlverb-text"> </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e291">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">concat($class_toc,'_',$depth)</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e294">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">body</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e296">choose</a></span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e298">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$autoHead='true'</span>"&gt;<span class="xmlverb-text"><br/>
                  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e300">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">autoMakeHead</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e303">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
                  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e305">for-each</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">tei:head</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e307">apply-templates</a></span> <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">plain</span>" /&gt;<span class="xmlverb-text"><br/>
                  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">for-each</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
              </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e315">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$autoHead='true'</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e317">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">autoMakeHead</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e320">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$display='plain'</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e322">for-each</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">tei:head</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e324">apply-templates</a></span> <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">plain</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">for-each</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e329">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$display='simple'</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e331">for-each</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">tei:head</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e333">apply-templates</a></span> <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">plain</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">for-each</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e337">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e339">for-each</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">tei:head</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e341">apply-templates</a></span> /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">for-each</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e349">doc</a></span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e351">short</a></span>&gt;<span class="xmlverb-text">[common] processing the number portion of a heading</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e354">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">text</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e356">detail</a></span>&gt;<span class="xmlverb-text">By default, the text is printed as is. You may<br/>
    wish to colour it, align it, etc</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e360">template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formatHeadingNumber</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e362">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">text</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e364">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">toc</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e366">copy-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$text</span>" /&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e369">doc</a></span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e371">short</a></span>&gt;<span class="xmlverb-text">[common] Making a heading for something, and making sure it has<br/>
      contents</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e374">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">minimal</span>"&gt;<span class="xmlverb-text">false</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e377">detail</a></span>&gt;<span class="xmlverb-text">This is a wrapper around the "header" template which ensures that<br/>
      some text is returned; if all else fails, the element name is<br/>
    used.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e381">template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">headerLink</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e383">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">minimal</span>"&gt;<span class="xmlverb-text">false</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e386">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">Text</span>"&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e388">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">header</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e390">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">minimal</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$minimalCrossRef</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e392">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">display</span>"&gt;<span class="xmlverb-text">plain</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e397">choose</a></span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e399">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$Text=''</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e401">text</a></span>&gt;<span class="xmlverb-text">&amp;lt;</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e404">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">local-name(.)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e406">text</a></span>&gt;<span class="xmlverb-text">&amp;gt;</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">text</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e410">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e412">copy-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$Text</span>" /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
  </span><div class="xd">
  &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e417">doc</a></span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e419">short</a></span>&gt;<span class="xmlverb-text">[common] Make a hypertext link</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e422">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">ptr</span>"&gt;<span class="xmlverb-text">ptr</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d28e425">detail</a></span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-name"><a name="d28e427">p</a></span>&gt;<span class="xmlverb-text"> cross-referencing </span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
  </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e432">template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">makeTEILink</span>"&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e434">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">ptr</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;!--<span class="xmlverb-comment"> is this a ptr or a ref? </span>--&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e438">choose</a></span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;!--<span class="xmlverb-comment"> If there is a target attribute starting with #, it is always a local reference </span>--&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e442">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">@target and starts-with(@target,'#')</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e444">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">makeInternalLink</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e446">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">target</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">substring-after(@target,'#')</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e448">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">ptr</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$ptr</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e450">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">dest</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e452">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">generateEndLink</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e454">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">where</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e456">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">substring-after(@target,'#')</span>" /&gt;<span class="xmlverb-text"><br/>
              </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;!--<span class="xmlverb-comment"> if we are doing TEI P4, all targets are local </span>--&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e465">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">@target and $teiP4Compat='true'</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e467">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">makeInternalLink</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e469">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">target</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@target</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e471">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">ptr</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$ptr</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e473">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">dest</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e475">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">generateEndLink</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e477">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">where</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e479">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@target</span>" /&gt;<span class="xmlverb-text"><br/>
              </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;!--<span class="xmlverb-comment"> other uses of target means it is external </span>--&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e489">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">@target</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e491">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">makeExternalLink</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e493">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">ptr</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$ptr</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e495">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">dest</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e497">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@target</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;!--<span class="xmlverb-comment"> If there is a url attribute starting with #, it is a local<br/>
       reference </span>--&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e504">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">@url and starts-with(@url,'#')</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e506">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">makeInternalLink</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e508">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">target</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">substring-after(@url,'#')</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e510">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">ptr</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$ptr</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e512">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">dest</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e514">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">generateEndLink</span>"&gt;<span class="xmlverb-text"><br/>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e516">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">where</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e518">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">substring-after(@url,'#')</span>" /&gt;<span class="xmlverb-text"><br/>
              </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;!--<span class="xmlverb-comment"> otherwise it is an external URL </span>--&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e527">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">@url</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e529">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">makeExternalLink</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e531">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">ptr</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$ptr</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e533">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">dest</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e535">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@url</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;!--<span class="xmlverb-comment"> A doc attribute means an external reference </span>--&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e543">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">@doc</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e545">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">makeExternalLink</span>"&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e547">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">ptr</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$ptr</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e549">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">dest</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e551">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">unparsed-entity-uri(@doc)</span>" /&gt;<span class="xmlverb-text"><br/>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e556">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"><br/>
      &lt;xsl:for-each select="@*"&gt;<br/>
        [[markup error: &lt;xsl:value-of select="name(.)"/&gt;=&lt;xsl:value-of select="."/&gt;]]<br/>
      &lt;/xsl:for-each&gt;<br/>
</span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d28e560">apply-templates</a></span> /&gt;<span class="xmlverb-text"><br/>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
  </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">stylesheet</span>&gt;<br/>
</div>
</tt><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>v
         </body></html>
