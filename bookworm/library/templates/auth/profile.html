{% extends "base.html" %}

{% block title %}{{ request.user.username }}'s profile{% endblock %}
{% block head %}
<link rel="stylesheet" type="text/css" href="/static/home.css" ></link>
<link rel="stylesheet" type="text/css" href="/static/auth.css" ></link>
<style type="text/css">
 ol { list-style-type: none; padding:0; margin:0; color: gray; }
 li a { text-decoration: none; color:gray;}
</style>
{% endblock head %}

{% block leftnav %}
<ol>
{% if not request.session.openids %}
<li><h3><a href="{% url django_authopenid.views.changepw %}">Change password</a></h3></li>
{% endif %}

{% if not request.session.openids %}
<li><h3><a href="{% url django_authopenid.views.changeemail %}">Change email address</a></h3></li>
{% endif %}
{% if request.session.openids %}
<li><h3><a href="{% url django_authopenid.views.changeopenid %}">Change associated OpenID</a></h3></li>
{% endif %}
<li><h3><a href="{% url django_authopenid.views.delete %}">Delete this account</a></h3></li>
</ol>
{% endblock %}

{% block main %}

<div id="bw-content">

{% if message or request.GET.msg %}
<p class="bw-message"><strong>{{ message }}{{ request.GET.msg }}</strong></p>
{% endif %}


<h1>User profile settings for {{ request.user.username }}</h1>

<table class="bw-meta">
  <thead>
    <tr>
      <th class="bw-table_header" colspan="2">User information</th>
    </tr>
  </thead>     
  <tbody>
    <tr>
      <th>Username</th>
      <td>{{ request.user.username }}</td>
    </tr>
    {% if request.session.openids %}
    <tr>
      <th>OpenID</th>
      <td>
        {% for url in request.session.openids %} 
          {{ url }}
        {% endfor %}
      <a href="{% url django_authopenid.views.changeopenid %}">[change]</a></td>
    </tr>
    {% endif %}
    <tr>
      <th>Full name</th>
      <td>{{ prefs.fullname }}</td>
    </tr>
    <tr>
      <th>Email address</th>
      <td> {{ request.user.email }} {% if not request.session.openids %}<a href="{% url django_authopenid.views.changeemail %}">[change]</a>{% endif %} </td>
    </tr>

    <tr>
      <th>Country</th>
      <td> {{ prefs.country }}</td>
    </tr>

    <tr>
      <th>Language</th>
      <td> {{ prefs.language }}</td>
    </tr>


    <tr>
      <th>Show individual book styles? </th>
      <td>
        {% if prefs.use_iframe %}
        Yes, show book's styles in a scrolling window 
        <br/>(<a href="{% url library.views.profile %}?iframe=no">change this</a>)
        {% else %}
        No, view without styles 
        <br/>(<a href="{% url library.views.profile %}?iframe=yes">change this</a>)
        {% endif %}           
      </td>
    </tr>
    <tr>
      <th>Show warning on chapter pages if the book has styles?</th>
      <td>
        {% if prefs.show_iframe_note %}
        Yes, show this message
        <br/>(<a href="{% url library.views.profile %}?iframe_note=no">change this</a>)
        {% else %}
        No, hide this message
        <br/>(<a href="{% url library.views.profile %}?iframe_note=yes">change this</a>)
        {% endif %}           
      </td>
    </tr>
  </tbody>
</table>
</div>

{% endblock main %}
