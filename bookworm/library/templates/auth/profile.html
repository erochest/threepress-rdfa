{% extends "base.html" %}

{% block title %}{{ request.user.username }}'s profile{% endblock %}
{% block head %}
<link rel="stylesheet" type="text/css" href="/static/home.css" ></link>
<link rel="stylesheet" type="text/css" href="/static/auth.css" ></link>
<style type="text/css">
 ol { list-style-type: none; padding:0; margin:0; color: gray; }
 li a { text-decoration: none; color:gray;}
</style>
{% endblock head %}

{% block leftnav %}
<ol>
{% if not request.openid %}
<li><h3><a href="{% url django_authopenid.views.changepw %}">Change password</a></h3></li>
{% endif %}

{% if not request.openid %}
<li><h3><a href="{% url django_authopenid.views.changeemail %}">Change email address</a></h3></li>
{% endif %}
{% if request.openid %}
<li><h3><a href="{% url django_authopenid.views.changeopenid %}">Change associated OpenID</a></h3></li>
{% endif %}
<li><h3><a href="{% url django_authopenid.views.delete %}">Delete this account</a></h3></li>
</ol>
{% endblock %}

{% block main %}

<div id="bw-content">

{% if message or request.GET.msg %}
<p class="bw-message"><strong>{{ message }}{{ request.GET.msg }}</strong></p>
{% endif %}


<h1>User profile settings for {{ request.user.username }}</h1>

<table class="bw-meta">
  <thead>
    <tr>
      <th class="bw-table_header" colspan="2">User information</th>
    </tr>
  </thead>     
  <tbody>
    <tr>
      <th>Username</th>
      <td>{{ request.user.username }}</td>
    </tr>
    {% if request.openid %}
    <tr>
      <th>OpenID</th>
      <td>
        {% if request.session.openids %}
          {% for url in request.session.openids %} 
            {{ url }}
          {% endfor %}
        {% else %}
          {{ request.openid }}
        {% endif %}
        
      <a href="{% url django_authopenid.views.changeopenid %}">[change]</a></td>
    </tr>
    {% endif %}
    {% if prefs.fullname %}
    <tr>
      <th>Full name</th>
      <td>{{ prefs.fullname }}</td>
    </tr>
    {% endif %}
    <tr>
      <th>Email address</th>
      <td> {{ request.user.email }} {% if not request.openid %}<a href="{% url django_authopenid.views.changeemail %}">[change]</a>{% endif %} </td>
    </tr>
    {% if prefs.country %}
    <tr>
      <th>Country</th>
      <td> {{ prefs.country }}</td>
    </tr>
    {% endif %}
    {% if prefs.language %}
    <tr>
      <th>Language</th>
      <td> {{ prefs.language }}</td>
    </tr>
    {% endif %}

  </tbody>
</table>
</div>

{% endblock main %}
